{% extends 'base2.html.twig' %}

{% block title %}Rendez-vous
{% endblock %}

{% block body %}
	<section class="content">
		<div class="container-fluid">
			<div class="block-header">
				<div class="row clearfix">
					<div class="col-lg-5 col-md-5 col-sm-12">
						<h2>Gestion Rendez-Vous</h2>
						<ul class="breadcrumb padding-0">
							<li class="breadcrumb-item">
								<a href="index.html">
									<i class="zmdi zmdi-home"></i>
								</a>
							</li>
							<li class="breadcrumb-item">
								<a href="javascript:void(0);">Medecin</a>
							</li>
							<li class="breadcrumb-item active">Rendez-vous</li>
						</ul>
					</div>
					<div class="container">
						<br>
						<form action="#" class="nk-form nk-form-style-1" novalidate="novalidate">
							<div class="input-group">
								<input type="text" class="form-control" placeholder="Type something..." id="search">
								
							</div>
						</form>
					</div>

                    <div id="all"> 
                                    {% include "rendez_vous/ajax.html.twig" %}
                                </div>


                                <div id="search"> 
                                    
                                </div>
				</div>
			</div>
			

		</div>

		
	</section>
	

{% block javascript %}
	<script src="{{ asset('assets/js/jquery.js') }}"></script>
	<script src="{{ asset('https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js')}}"></script>
	<script>
		$(document).ready(function () {
var currentRequest = null;
$("#search").keyup(function (e) { 
var value = $(this).val();
if (currentRequest != null) {
currentRequest.abort();
}

currentRequest = $.ajax({
url: "{{ path('ajaxuser') }}",
type: 'GET',
data: {
'searchValue': value
},
success: function (retour) {
$('#all').html(retour);
}
});
return false;
});
});
	</script>
{% endblock %}
{% block calendar %}

<style>
                #calendrier{
                    width: 50%;
                    margin: auto;
                }
            </style>
			
            <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.2/main.min.js" integrity="sha256-YicH/8aE660iEnJtgll3vT54dJApy3XkYmqNfGVFEzA=" crossorigin="anonymous"></script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.2/main.min.css" integrity="sha256-5veQuRbWaECuYxwap/IOE/DAwNxgm4ikX7nrgsqYp88=" crossorigin="anonymous">

            <div id="calendrier"></div>


            <script>
                window.onload = () =>{
                    let calendarElt = document.querySelector("#calendrier")
                    let calendar = new FullCalendar.Calendar(calendarElt,{
                        initialView: 'dayGridMonth',
                        locale: 'fr',
                        timeZone: 'Europe/Paris',
                        headerToolbar: {
                            start: 'prev,next today',
                            center: 'title',
                            end: 'dayGridMonth,timeGridWeek'
                        },
						events: {{ data |raw }}

                    })
                    calendar.render();
                }
            </script>
{% endblock %}

{% endblock %}
